var Dr=Object.defineProperty;var Ot=e=>{throw TypeError(e)};var Hr=(e,t,r)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var v=(e,t,r)=>Hr(e,typeof t!="symbol"?t+"":t,r),at=(e,t,r)=>t.has(e)||Ot("Cannot "+r);var h=(e,t,r)=>(at(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?Ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),y=(e,t,r,s)=>(at(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),S=(e,t,r)=>(at(e,t,"access private method"),r);var jt=(e,t,r,s)=>({set _(i){y(e,t,i,r)},get _(){return h(e,t,s)}});var er={Stringify:1},M=(e,t)=>{const r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},Fr=/[&<>'"]/,tr=async(e,t)=>{let r="";t||(t=[]);const s=await Promise.all(e);for(let i=s.length-1;r+=s[i],i--,!(i<0);i--){let l=s[i];typeof l=="object"&&t.push(...l.callbacks||[]);const a=l.isEscaped;if(l=await(typeof l=="object"?l.toString():l),typeof l=="object"&&t.push(...l.callbacks||[]),l.isEscaped??a)r+=l;else{const c=[r];ee(l,c),r=c[0]}}return M(r,t)},ee=(e,t)=>{const r=e.search(Fr);if(r===-1){t[0]+=e;return}let s,i,l=0;for(i=r;i<e.length;i++){switch(e.charCodeAt(i)){case 34:s="&quot;";break;case 39:s="&#39;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}t[0]+=e.substring(l,i)+s,l=i+1}t[0]+=e.substring(l,i)},rr=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const r=[e],s={};return t.forEach(i=>i({phase:er.Stringify,buffer:r,context:s})),r[0]},sr=async(e,t,r,s,i)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const l=e.callbacks;return l!=null&&l.length?(i?i[0]+=e:i=[e],Promise.all(l.map(c=>c({phase:t,buffer:i,context:s}))).then(c=>Promise.all(c.filter(Boolean).map(o=>sr(o,t,!1,s,i))).then(()=>i[0]))):Promise.resolve(e)},Ir=(e,...t)=>{const r=[""];for(let s=0,i=e.length-1;s<i;s++){r[0]+=e[s];const l=Array.isArray(t[s])?t[s].flat(1/0):[t[s]];for(let a=0,c=l.length;a<c;a++){const o=l[a];if(typeof o=="string")ee(o,r);else if(typeof o=="number")r[0]+=o;else{if(typeof o=="boolean"||o===null||o===void 0)continue;if(typeof o=="object"&&o.isEscaped)if(o.callbacks)r.unshift("",o);else{const d=o.toString();d instanceof Promise?r.unshift("",d):r[0]+=d}else o instanceof Promise?r.unshift("",o):ee(o.toString(),r)}}}return r[0]+=e.at(-1),r.length===1?"callbacks"in r?M(rr(M(r[0],r.callbacks))):M(r[0]):tr(r,r.callbacks)},Et=Symbol("RENDERER"),vt=Symbol("ERROR_HANDLER"),A=Symbol("STASH"),nr=Symbol("INTERNAL"),_r=Symbol("MEMO"),et=Symbol("PERMALINK"),Tt=e=>(e[nr]=!0,e),ir=e=>({value:t,children:r})=>{if(!r)return;const s={children:[{tag:Tt(()=>{e.push(t)}),props:{}}]};Array.isArray(r)?s.children.push(...r.flat()):s.children.push(r),s.children.push({tag:Tt(()=>{e.pop()}),props:{}});const i={tag:"",props:s,type:""};return i[vt]=l=>{throw e.pop(),l},i},lr=e=>{const t=[e],r=ir(t);return r.values=t,r.Provider=r,we.push(r),r},we=[],kt=e=>{const t=[e],r=(s=>{t.push(s.value);let i;try{i=s.children?(Array.isArray(s.children)?new dr("",{},s.children):s.children).toString():""}catch(l){throw t.pop(),l}return i instanceof Promise?i.finally(()=>t.pop()).then(l=>M(l,l.callbacks)):(t.pop(),M(i))});return r.values=t,r.Provider=r,r[Et]=ir(t),we.push(r),r},ke=e=>e.values.at(-1),ze={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},bt={},Ve="data-precedence",Ie=e=>Array.isArray(e)?e:[e],$t=new WeakMap,Lt=(e,t,r,s)=>({buffer:i,context:l})=>{if(!i)return;const a=$t.get(l)||{};$t.set(l,a);const c=a[e]||(a[e]=[]);let o=!1;const d=ze[e];if(d.length>0){e:for(const[,u]of c)for(const f of d)if(((u==null?void 0:u[f])??null)===(r==null?void 0:r[f])){o=!0;break e}}if(o?i[0]=i[0].replaceAll(t,""):d.length>0?c.push([t,r,s]):c.unshift([t,r,s]),i[0].indexOf("</head>")!==-1){let u;if(s===void 0)u=c.map(([f])=>f);else{const f=[];u=c.map(([p,,g])=>{let b=f.indexOf(g);return b===-1&&(f.push(g),b=f.length-1),[p,b]}).sort((p,g)=>p[1]-g[1]).map(([p])=>p)}u.forEach(f=>{i[0]=i[0].replaceAll(f,"")}),i[0]=i[0].replace(/(?=<\/head>)/,u.join(""))}},_e=(e,t,r)=>M(new I(e,r,Ie(t??[])).toString()),Be=(e,t,r,s)=>{if("itemProp"in r)return _e(e,t,r);let{precedence:i,blocking:l,...a}=r;i=s?i??"":void 0,s&&(a[Ve]=i);const c=new I(e,a,Ie(t||[])).toString();return c instanceof Promise?c.then(o=>M(c,[...o.callbacks||[],Lt(e,o,a,i)])):M(c,[Lt(e,c,a,i)])},Br=({children:e,...t})=>{const r=St();if(r){const s=ke(r);if(s==="svg"||s==="head")return new I("title",t,Ie(e??[]))}return Be("title",e,t,!1)},qr=({children:e,...t})=>{const r=St();return["src","async"].some(s=>!t[s])||r&&ke(r)==="head"?_e("script",e,t):Be("script",e,t,!1)},Ur=({children:e,...t})=>["href","precedence"].every(r=>r in t)?(t["data-href"]=t.href,delete t.href,Be("style",e,t,!0)):_e("style",e,t),Wr=({children:e,...t})=>["onLoad","onError"].some(r=>r in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?_e("link",e,t):Be("link",e,t,"precedence"in t),Kr=({children:e,...t})=>{const r=St();return r&&ke(r)==="head"?_e("meta",e,t):Be("meta",e,t,!1)},ar=(e,{children:t,...r})=>new I(e,r,Ie(t??[])),zr=e=>(typeof e.action=="function"&&(e.action=et in e.action?e.action[et]:void 0),ar("form",e)),cr=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=et in t.formAction?t.formAction[et]:void 0),ar(e,t)),Vr=e=>cr("input",e),Gr=e=>cr("button",e);const ct=Object.freeze(Object.defineProperty({__proto__:null,button:Gr,form:zr,input:Vr,link:Wr,meta:Kr,script:qr,style:Ur,title:Br},Symbol.toStringTag,{value:"Module"}));var Jr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),tt=e=>Jr.get(e)||e,or=(e,t)=>{for(const[r,s]of Object.entries(e)){const i=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,l=>`-${l.toLowerCase()}`);t(i,s==null?null:typeof s=="number"?i.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${s}`:`${s}px`:s)}},je=void 0,St=()=>je,Xr=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,Zr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Yr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Rt=(e,t)=>{for(let r=0,s=e.length;r<s;r++){const i=e[r];if(typeof i=="string")ee(i,t);else{if(typeof i=="boolean"||i===null||i===void 0)continue;i instanceof I?i.toStringToBuffer(t):typeof i=="number"||i.isEscaped?t[0]+=i:i instanceof Promise?t.unshift("",i):Rt(i,t)}}},I=class{constructor(e,t,r){v(this,"tag");v(this,"props");v(this,"key");v(this,"children");v(this,"isEscaped",!0);v(this,"localContexts");this.tag=e,this.props=t,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,r;const e=[""];(t=this.localContexts)==null||t.forEach(([s,i])=>{s.values.push(i)});try{this.toStringToBuffer(e)}finally{(r=this.localContexts)==null||r.forEach(([s])=>{s.values.pop()})}return e.length===1?"callbacks"in e?rr(M(e[0],e.callbacks)).toString():e[0]:tr(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,r=this.props;let{children:s}=this;e[0]+=`<${t}`;const i=je&&ke(je)==="svg"?l=>Xr(tt(l)):l=>tt(l);for(let[l,a]of Object.entries(r))if(l=i(l),l!=="children"){if(l==="style"&&typeof a=="object"){let c="";or(a,(o,d)=>{d!=null&&(c+=`${c?";":""}${o}:${d}`)}),e[0]+=' style="',ee(c,e),e[0]+='"'}else if(typeof a=="string")e[0]+=` ${l}="`,ee(a,e),e[0]+='"';else if(a!=null)if(typeof a=="number"||a.isEscaped)e[0]+=` ${l}="${a}"`;else if(typeof a=="boolean"&&Yr.includes(l))a&&(e[0]+=` ${l}=""`);else if(l==="dangerouslySetInnerHTML"){if(s.length>0)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");s=[M(a.__html)]}else if(a instanceof Promise)e[0]+=` ${l}="`,e.unshift('"',a);else if(typeof a=="function"){if(!l.startsWith("on")&&l!=="ref")throw new Error(`Invalid prop '${l}' of type 'function' supplied to '${t}'.`)}else e[0]+=` ${l}="`,ee(a.toString(),e),e[0]+='"'}if(Zr.includes(t)&&s.length===0){e[0]+="/>";return}e[0]+=">",Rt(s,e),e[0]+=`</${t}>`}},ot=class extends I{toStringToBuffer(e){const{children:t}=this,r={...this.props};t.length&&(r.children=t.length===1?t[0]:t);const s=this.tag.call(null,r);if(!(typeof s=="boolean"||s==null))if(s instanceof Promise)if(we.length===0)e.unshift("",s);else{const i=we.map(l=>[l,l.values.at(-1)]);e.unshift("",s.then(l=>(l instanceof I&&(l.localContexts=i),l)))}else s instanceof I?s.toStringToBuffer(e):typeof s=="number"||s.isEscaped?(e[0]+=s,s.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...s.callbacks))):ee(s,e)}},dr=class extends I{toStringToBuffer(e){Rt(this.children,e)}},Nt=(e,t,...r)=>{t??(t={}),r.length&&(t.children=r.length===1?r[0]:r);const s=t.key;delete t.key;const i=Ge(e,t,r);return i.key=s,i},Mt=!1,Ge=(e,t,r)=>{if(!Mt){for(const s in bt)ct[s][Et]=bt[s];Mt=!0}return typeof e=="function"?new ot(e,t,r):ct[e]?new ot(ct[e],t,r):e==="svg"||e==="head"?(je||(je=kt("")),new I(e,t,[new ot(je,{value:e},r)])):new I(e,t,r)},Qr=({children:e})=>new dr("",{children:e},Array.isArray(e)?e:e?[e]:[]);function n(e,t,r){let s;if(!t||!("children"in t))s=Ge(e,t,[]);else{const i=t.children;s=Array.isArray(i)?Ge(e,t,i):Ge(e,t,[i])}return s.key=r,s}var Dt=(e,t,r)=>(s,i)=>{let l=-1;return a(0);async function a(c){if(c<=l)throw new Error("next() called multiple times");l=c;let o,d=!1,u;if(e[c]?(u=e[c][0][0],s.req.routeIndex=c):u=c===e.length&&i||void 0,u)try{o=await u(s,()=>a(c+1))}catch(f){if(f instanceof Error&&t)s.error=f,o=await t(f,s),d=!0;else throw f}else s.finalized===!1&&r&&(o=await r(s));return o&&(s.finalized===!1||d)&&(s.res=o),s}},es=Symbol(),ts=async(e,t=Object.create(null))=>{const{all:r=!1,dot:s=!1}=t,l=(e instanceof mr?e.raw.headers:e.headers).get("Content-Type");return l!=null&&l.startsWith("multipart/form-data")||l!=null&&l.startsWith("application/x-www-form-urlencoded")?rs(e,{all:r,dot:s}):{}};async function rs(e,t){const r=await e.formData();return r?ss(r,t):{}}function ss(e,t){const r=Object.create(null);return e.forEach((s,i)=>{t.all||i.endsWith("[]")?ns(r,i,s):r[i]=s}),t.dot&&Object.entries(r).forEach(([s,i])=>{s.includes(".")&&(is(r,s,i),delete r[s])}),r}var ns=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},is=(e,t,r)=>{let s=e;const i=t.split(".");i.forEach((l,a)=>{a===i.length-1?s[l]=r:((!s[l]||typeof s[l]!="object"||Array.isArray(s[l])||s[l]instanceof File)&&(s[l]=Object.create(null)),s=s[l])})},hr=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},ls=e=>{const{groups:t,path:r}=as(e),s=hr(r);return cs(s,t)},as=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,s)=>{const i=`@${s}`;return t.push([i,r]),i}),{groups:t,path:e}},cs=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[s]=t[r];for(let i=e.length-1;i>=0;i--)if(e[i].includes(s)){e[i]=e[i].replace(s,t[r][1]);break}}return e},We={},os=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const s=`${e}#${t}`;return We[s]||(r[2]?We[s]=t&&t[0]!==":"&&t[0]!=="*"?[s,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:We[s]=[e,r[1],!0]),We[s]}return null},Pt=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},ds=e=>Pt(e,decodeURI),ur=e=>{const t=e.url,r=t.indexOf("/",t.indexOf(":")+4);let s=r;for(;s<t.length;s++){const i=t.charCodeAt(s);if(i===37){const l=t.indexOf("?",s),a=t.indexOf("#",s),c=l===-1?a===-1?void 0:a:a===-1?l:Math.min(l,a),o=t.slice(r,c);return ds(o.includes("%25")?o.replace(/%25/g,"%2525"):o)}else if(i===63||i===35)break}return t.slice(r,s)},hs=e=>{const t=ur(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},he=(e,t,...r)=>(r.length&&(t=he(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),fr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let s="";return t.forEach(i=>{if(i!==""&&!/\:/.test(i))s+="/"+i;else if(/\:/.test(i))if(/\?/.test(i)){r.length===0&&s===""?r.push("/"):r.push(s);const l=i.replace("?","");s+="/"+l,r.push(s)}else s+="/"+i}),r.filter((i,l,a)=>a.indexOf(i)===l)},dt=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Pt(e,gr):e):e,pr=(e,t,r)=>{let s;if(!r&&t&&!/[%+]/.test(t)){let a=e.indexOf("?",8);if(a===-1)return;for(e.startsWith(t,a+1)||(a=e.indexOf(`&${t}`,a+1));a!==-1;){const c=e.charCodeAt(a+t.length+1);if(c===61){const o=a+t.length+2,d=e.indexOf("&",o);return dt(e.slice(o,d===-1?void 0:d))}else if(c==38||isNaN(c))return"";a=e.indexOf(`&${t}`,a+1)}if(s=/[%+]/.test(e),!s)return}const i={};s??(s=/[%+]/.test(e));let l=e.indexOf("?",8);for(;l!==-1;){const a=e.indexOf("&",l+1);let c=e.indexOf("=",l);c>a&&a!==-1&&(c=-1);let o=e.slice(l+1,c===-1?a===-1?void 0:a:c);if(s&&(o=dt(o)),l=a,o==="")continue;let d;c===-1?d="":(d=e.slice(c+1,a===-1?void 0:a),s&&(d=dt(d))),r?(i[o]&&Array.isArray(i[o])||(i[o]=[]),i[o].push(d)):i[o]??(i[o]=d)}return t?i[t]:i},us=pr,fs=(e,t)=>pr(e,t,!0),gr=decodeURIComponent,Ht=e=>Pt(e,gr),pe,N,z,vr,br,xt,G,Gt,mr=(Gt=class{constructor(e,t="/",r=[[]]){E(this,z);v(this,"raw");E(this,pe);E(this,N);v(this,"routeIndex",0);v(this,"path");v(this,"bodyCache",{});E(this,G,e=>{const{bodyCache:t,raw:r}=this,s=t[e];if(s)return s;const i=Object.keys(t)[0];return i?t[i].then(l=>(i==="json"&&(l=JSON.stringify(l)),new Response(l)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,y(this,N,r),y(this,pe,{})}param(e){return e?S(this,z,vr).call(this,e):S(this,z,br).call(this)}query(e){return us(this.url,e)}queries(e){return fs(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,s)=>{t[s]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await ts(this,e))}json(){return h(this,G).call(this,"text").then(e=>JSON.parse(e))}text(){return h(this,G).call(this,"text")}arrayBuffer(){return h(this,G).call(this,"arrayBuffer")}blob(){return h(this,G).call(this,"blob")}formData(){return h(this,G).call(this,"formData")}addValidatedData(e,t){h(this,pe)[e]=t}valid(e){return h(this,pe)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[es](){return h(this,N)}get matchedRoutes(){return h(this,N)[0].map(([[,e]])=>e)}get routePath(){return h(this,N)[0].map(([[,e]])=>e)[this.routeIndex].path}},pe=new WeakMap,N=new WeakMap,z=new WeakSet,vr=function(e){const t=h(this,N)[0][this.routeIndex][1][e],r=S(this,z,xt).call(this,t);return r&&/\%/.test(r)?Ht(r):r},br=function(){const e={},t=Object.keys(h(this,N)[0][this.routeIndex][1]);for(const r of t){const s=S(this,z,xt).call(this,h(this,N)[0][this.routeIndex][1][r]);s!==void 0&&(e[r]=/\%/.test(s)?Ht(s):s)}return e},xt=function(e){return h(this,N)[1]?h(this,N)[1][e]:e},G=new WeakMap,Gt),ps="text/plain; charset=UTF-8",ht=(e,t)=>({"Content-Type":e,...t}),Le,Ne,q,ge,U,L,Me,me,ve,se,De,He,J,ue,Jt,gs=(Jt=class{constructor(e,t){E(this,J);E(this,Le);E(this,Ne);v(this,"env",{});E(this,q);v(this,"finalized",!1);v(this,"error");E(this,ge);E(this,U);E(this,L);E(this,Me);E(this,me);E(this,ve);E(this,se);E(this,De);E(this,He);v(this,"render",(...e)=>(h(this,me)??y(this,me,t=>this.html(t)),h(this,me).call(this,...e)));v(this,"setLayout",e=>y(this,Me,e));v(this,"getLayout",()=>h(this,Me));v(this,"setRenderer",e=>{y(this,me,e)});v(this,"header",(e,t,r)=>{this.finalized&&y(this,L,new Response(h(this,L).body,h(this,L)));const s=h(this,L)?h(this,L).headers:h(this,se)??y(this,se,new Headers);t===void 0?s.delete(e):r!=null&&r.append?s.append(e,t):s.set(e,t)});v(this,"status",e=>{y(this,ge,e)});v(this,"set",(e,t)=>{h(this,q)??y(this,q,new Map),h(this,q).set(e,t)});v(this,"get",e=>h(this,q)?h(this,q).get(e):void 0);v(this,"newResponse",(...e)=>S(this,J,ue).call(this,...e));v(this,"body",(e,t,r)=>S(this,J,ue).call(this,e,t,r));v(this,"text",(e,t,r)=>!h(this,se)&&!h(this,ge)&&!t&&!r&&!this.finalized?new Response(e):S(this,J,ue).call(this,e,t,ht(ps,r)));v(this,"json",(e,t,r)=>S(this,J,ue).call(this,JSON.stringify(e),t,ht("application/json",r)));v(this,"html",(e,t,r)=>{const s=i=>S(this,J,ue).call(this,i,t,ht("text/html; charset=UTF-8",r));return typeof e=="object"?sr(e,er.Stringify,!1,{}).then(s):s(e)});v(this,"redirect",(e,t)=>{const r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)});v(this,"notFound",()=>(h(this,ve)??y(this,ve,()=>new Response),h(this,ve).call(this,this)));y(this,Le,e),t&&(y(this,U,t.executionCtx),this.env=t.env,y(this,ve,t.notFoundHandler),y(this,He,t.path),y(this,De,t.matchResult))}get req(){return h(this,Ne)??y(this,Ne,new mr(h(this,Le),h(this,He),h(this,De))),h(this,Ne)}get event(){if(h(this,U)&&"respondWith"in h(this,U))return h(this,U);throw Error("This context has no FetchEvent")}get executionCtx(){if(h(this,U))return h(this,U);throw Error("This context has no ExecutionContext")}get res(){return h(this,L)||y(this,L,new Response(null,{headers:h(this,se)??y(this,se,new Headers)}))}set res(e){if(h(this,L)&&e){e=new Response(e.body,e);for(const[t,r]of h(this,L).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const s=h(this,L).headers.getSetCookie();e.headers.delete("set-cookie");for(const i of s)e.headers.append("set-cookie",i)}else e.headers.set(t,r)}y(this,L,e),this.finalized=!0}get var(){return h(this,q)?Object.fromEntries(h(this,q)):{}}},Le=new WeakMap,Ne=new WeakMap,q=new WeakMap,ge=new WeakMap,U=new WeakMap,L=new WeakMap,Me=new WeakMap,me=new WeakMap,ve=new WeakMap,se=new WeakMap,De=new WeakMap,He=new WeakMap,J=new WeakSet,ue=function(e,t,r){const s=h(this,L)?new Headers(h(this,L).headers):h(this,se)??new Headers;if(typeof t=="object"&&"headers"in t){const l=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[a,c]of l)a.toLowerCase()==="set-cookie"?s.append(a,c):s.set(a,c)}if(r)for(const[l,a]of Object.entries(r))if(typeof a=="string")s.set(l,a);else{s.delete(l);for(const c of a)s.append(l,c)}const i=typeof t=="number"?t:(t==null?void 0:t.status)??h(this,ge);return new Response(e,{status:i,headers:s})},Jt),O="ALL",ms="all",vs=["get","post","put","delete","options","patch"],xr="Can not add a route since the matcher is already built.",yr=class extends Error{},bs="__COMPOSED_HANDLER",xs=e=>e.text("404 Not Found",404),Ft=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},D,j,wr,H,te,Je,Xe,be,ys=(be=class{constructor(t={}){E(this,j);v(this,"get");v(this,"post");v(this,"put");v(this,"delete");v(this,"options");v(this,"patch");v(this,"all");v(this,"on");v(this,"use");v(this,"router");v(this,"getPath");v(this,"_basePath","/");E(this,D,"/");v(this,"routes",[]);E(this,H,xs);v(this,"errorHandler",Ft);v(this,"onError",t=>(this.errorHandler=t,this));v(this,"notFound",t=>(y(this,H,t),this));v(this,"fetch",(t,...r)=>S(this,j,Xe).call(this,t,r[1],r[0],t.method));v(this,"request",(t,r,s,i)=>t instanceof Request?this.fetch(r?new Request(t,r):t,s,i):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${he("/",t)}`,r),s,i)));v(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(S(this,j,Xe).call(this,t.request,t,void 0,t.request.method))})});[...vs,ms].forEach(l=>{this[l]=(a,...c)=>(typeof a=="string"?y(this,D,a):S(this,j,te).call(this,l,h(this,D),a),c.forEach(o=>{S(this,j,te).call(this,l,h(this,D),o)}),this)}),this.on=(l,a,...c)=>{for(const o of[a].flat()){y(this,D,o);for(const d of[l].flat())c.map(u=>{S(this,j,te).call(this,d.toUpperCase(),h(this,D),u)})}return this},this.use=(l,...a)=>(typeof l=="string"?y(this,D,l):(y(this,D,"*"),a.unshift(l)),a.forEach(c=>{S(this,j,te).call(this,O,h(this,D),c)}),this);const{strict:s,...i}=t;Object.assign(this,i),this.getPath=s??!0?t.getPath??ur:hs}route(t,r){const s=this.basePath(t);return r.routes.map(i=>{var a;let l;r.errorHandler===Ft?l=i.handler:(l=async(c,o)=>(await Dt([],r.errorHandler)(c,()=>i.handler(c,o))).res,l[bs]=i.handler),S(a=s,j,te).call(a,i.method,i.path,l)}),this}basePath(t){const r=S(this,j,wr).call(this);return r._basePath=he(this._basePath,t),r}mount(t,r,s){let i,l;s&&(typeof s=="function"?l=s:(l=s.optionHandler,s.replaceRequest===!1?i=o=>o:i=s.replaceRequest));const a=l?o=>{const d=l(o);return Array.isArray(d)?d:[d]}:o=>{let d;try{d=o.executionCtx}catch{}return[o.env,d]};i||(i=(()=>{const o=he(this._basePath,t),d=o==="/"?0:o.length;return u=>{const f=new URL(u.url);return f.pathname=f.pathname.slice(d)||"/",new Request(f,u)}})());const c=async(o,d)=>{const u=await r(i(o.req.raw),...a(o));if(u)return u;await d()};return S(this,j,te).call(this,O,he(t,"*"),c),this}},D=new WeakMap,j=new WeakSet,wr=function(){const t=new be({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,y(t,H,h(this,H)),t.routes=this.routes,t},H=new WeakMap,te=function(t,r,s){t=t.toUpperCase(),r=he(this._basePath,r);const i={basePath:this._basePath,path:r,method:t,handler:s};this.router.add(t,r,[s,i]),this.routes.push(i)},Je=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},Xe=function(t,r,s,i){if(i==="HEAD")return(async()=>new Response(null,await S(this,j,Xe).call(this,t,r,s,"GET")))();const l=this.getPath(t,{env:s}),a=this.router.match(i,l),c=new gs(t,{path:l,matchResult:a,env:s,executionCtx:r,notFoundHandler:h(this,H)});if(a[0].length===1){let d;try{d=a[0][0][0][0](c,async()=>{c.res=await h(this,H).call(this,c)})}catch(u){return S(this,j,Je).call(this,u,c)}return d instanceof Promise?d.then(u=>u||(c.finalized?c.res:h(this,H).call(this,c))).catch(u=>S(this,j,Je).call(this,u,c)):d??h(this,H).call(this,c)}const o=Dt(a[0],this.errorHandler,h(this,H));return(async()=>{try{const d=await o(c);if(!d.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return d.res}catch(d){return S(this,j,Je).call(this,d,c)}})()},be),Er=[];function ws(e,t){const r=this.buildAllMatchers(),s=((i,l)=>{const a=r[i]||r[O],c=a[2][l];if(c)return c;const o=l.match(a[0]);if(!o)return[[],Er];const d=o.indexOf("",1);return[a[1][d],o]});return this.match=s,s(e,t)}var rt="[^/]+",Ae=".*",Oe="(?:|/.*)",fe=Symbol(),Es=new Set(".\\+*[^]$()");function ks(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Ae||e===Oe?1:t===Ae||t===Oe?-1:e===rt?1:t===rt?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ne,ie,F,ce,Ss=(ce=class{constructor(){E(this,ne);E(this,ie);E(this,F,Object.create(null))}insert(t,r,s,i,l){if(t.length===0){if(h(this,ne)!==void 0)throw fe;if(l)return;y(this,ne,r);return}const[a,...c]=t,o=a==="*"?c.length===0?["","",Ae]:["","",rt]:a==="/*"?["","",Oe]:a.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let d;if(o){const u=o[1];let f=o[2]||rt;if(u&&o[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw fe;if(d=h(this,F)[f],!d){if(Object.keys(h(this,F)).some(p=>p!==Ae&&p!==Oe))throw fe;if(l)return;d=h(this,F)[f]=new ce,u!==""&&y(d,ie,i.varIndex++)}!l&&u!==""&&s.push([u,h(d,ie)])}else if(d=h(this,F)[a],!d){if(Object.keys(h(this,F)).some(u=>u.length>1&&u!==Ae&&u!==Oe))throw fe;if(l)return;d=h(this,F)[a]=new ce}d.insert(c,r,s,i,l)}buildRegExpStr(){const r=Object.keys(h(this,F)).sort(ks).map(s=>{const i=h(this,F)[s];return(typeof h(i,ie)=="number"?`(${s})@${h(i,ie)}`:Es.has(s)?`\\${s}`:s)+i.buildRegExpStr()});return typeof h(this,ne)=="number"&&r.unshift(`#${h(this,ne)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},ne=new WeakMap,ie=new WeakMap,F=new WeakMap,ce),st,Fe,Xt,Rs=(Xt=class{constructor(){E(this,st,{varIndex:0});E(this,Fe,new Ss)}insert(e,t,r){const s=[],i=[];for(let a=0;;){let c=!1;if(e=e.replace(/\{[^}]+\}/g,o=>{const d=`@\\${a}`;return i[a]=[d,o],a++,c=!0,d}),!c)break}const l=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=i.length-1;a>=0;a--){const[c]=i[a];for(let o=l.length-1;o>=0;o--)if(l[o].indexOf(c)!==-1){l[o]=l[o].replace(c,i[a][1]);break}}return h(this,Fe).insert(l,t,s,h(this,st),r),s}buildRegExp(){let e=h(this,Fe).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],s=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(i,l,a)=>l!==void 0?(r[++t]=Number(l),"$()"):(a!==void 0&&(s[Number(a)]=++t),"")),[new RegExp(`^${e}`),r,s]}},st=new WeakMap,Fe=new WeakMap,Xt),Ps=[/^$/,[],Object.create(null)],Ze=Object.create(null);function kr(e){return Ze[e]??(Ze[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Cs(){Ze=Object.create(null)}function As(e){var d;const t=new Rs,r=[];if(e.length===0)return Ps;const s=e.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,f],[p,g])=>u?1:p?-1:f.length-g.length),i=Object.create(null);for(let u=0,f=-1,p=s.length;u<p;u++){const[g,b,x]=s[u];g?i[b]=[x.map(([w])=>[w,Object.create(null)]),Er]:f++;let m;try{m=t.insert(b,f,g)}catch(w){throw w===fe?new yr(b):w}g||(r[f]=x.map(([w,k])=>{const P=Object.create(null);for(k-=1;k>=0;k--){const[R,C]=m[k];P[R]=C}return[w,P]}))}const[l,a,c]=t.buildRegExp();for(let u=0,f=r.length;u<f;u++)for(let p=0,g=r[u].length;p<g;p++){const b=(d=r[u][p])==null?void 0:d[1];if(!b)continue;const x=Object.keys(b);for(let m=0,w=x.length;m<w;m++)b[x[m]]=c[b[x[m]]]}const o=[];for(const u in a)o[u]=r[a[u]];return[l,o,i]}function oe(e,t){if(e){for(const r of Object.keys(e).sort((s,i)=>i.length-s.length))if(kr(r).test(t))return[...e[r]]}}var X,Z,nt,Sr,Zt,Os=(Zt=class{constructor(){E(this,nt);v(this,"name","RegExpRouter");E(this,X);E(this,Z);v(this,"match",ws);y(this,X,{[O]:Object.create(null)}),y(this,Z,{[O]:Object.create(null)})}add(e,t,r){var c;const s=h(this,X),i=h(this,Z);if(!s||!i)throw new Error(xr);s[e]||[s,i].forEach(o=>{o[e]=Object.create(null),Object.keys(o[O]).forEach(d=>{o[e][d]=[...o[O][d]]})}),t==="/*"&&(t="*");const l=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const o=kr(t);e===O?Object.keys(s).forEach(d=>{var u;(u=s[d])[t]||(u[t]=oe(s[d],t)||oe(s[O],t)||[])}):(c=s[e])[t]||(c[t]=oe(s[e],t)||oe(s[O],t)||[]),Object.keys(s).forEach(d=>{(e===O||e===d)&&Object.keys(s[d]).forEach(u=>{o.test(u)&&s[d][u].push([r,l])})}),Object.keys(i).forEach(d=>{(e===O||e===d)&&Object.keys(i[d]).forEach(u=>o.test(u)&&i[d][u].push([r,l]))});return}const a=fr(t)||[t];for(let o=0,d=a.length;o<d;o++){const u=a[o];Object.keys(i).forEach(f=>{var p;(e===O||e===f)&&((p=i[f])[u]||(p[u]=[...oe(s[f],u)||oe(s[O],u)||[]]),i[f][u].push([r,l-d+o+1]))})}}buildAllMatchers(){const e=Object.create(null);return Object.keys(h(this,Z)).concat(Object.keys(h(this,X))).forEach(t=>{e[t]||(e[t]=S(this,nt,Sr).call(this,t))}),y(this,X,y(this,Z,void 0)),Cs(),e}},X=new WeakMap,Z=new WeakMap,nt=new WeakSet,Sr=function(e){const t=[];let r=e===O;return[h(this,X),h(this,Z)].forEach(s=>{const i=s[e]?Object.keys(s[e]).map(l=>[l,s[e][l]]):[];i.length!==0?(r||(r=!0),t.push(...i)):e!==O&&t.push(...Object.keys(s[O]).map(l=>[l,s[O][l]]))}),r?As(t):null},Zt),Y,W,Yt,js=(Yt=class{constructor(e){v(this,"name","SmartRouter");E(this,Y,[]);E(this,W,[]);y(this,Y,e.routers)}add(e,t,r){if(!h(this,W))throw new Error(xr);h(this,W).push([e,t,r])}match(e,t){if(!h(this,W))throw new Error("Fatal error");const r=h(this,Y),s=h(this,W),i=r.length;let l=0,a;for(;l<i;l++){const c=r[l];try{for(let o=0,d=s.length;o<d;o++)c.add(...s[o]);a=c.match(e,t)}catch(o){if(o instanceof yr)continue;throw o}this.match=c.match.bind(c),y(this,Y,[c]),y(this,W,void 0);break}if(l===i)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(h(this,W)||h(this,Y).length!==1)throw new Error("No active router has been determined yet.");return h(this,Y)[0]}},Y=new WeakMap,W=new WeakMap,Yt),Pe=Object.create(null),Q,$,le,xe,T,K,re,ye,Ts=(ye=class{constructor(t,r,s){E(this,K);E(this,Q);E(this,$);E(this,le);E(this,xe,0);E(this,T,Pe);if(y(this,$,s||Object.create(null)),y(this,Q,[]),t&&r){const i=Object.create(null);i[t]={handler:r,possibleKeys:[],score:0},y(this,Q,[i])}y(this,le,[])}insert(t,r,s){y(this,xe,++jt(this,xe)._);let i=this;const l=ls(r),a=[];for(let c=0,o=l.length;c<o;c++){const d=l[c],u=l[c+1],f=os(d,u),p=Array.isArray(f)?f[0]:d;if(p in h(i,$)){i=h(i,$)[p],f&&a.push(f[1]);continue}h(i,$)[p]=new ye,f&&(h(i,le).push(f),a.push(f[1])),i=h(i,$)[p]}return h(i,Q).push({[t]:{handler:s,possibleKeys:a.filter((c,o,d)=>d.indexOf(c)===o),score:h(this,xe)}}),i}search(t,r){var o;const s=[];y(this,T,Pe);let l=[this];const a=hr(r),c=[];for(let d=0,u=a.length;d<u;d++){const f=a[d],p=d===u-1,g=[];for(let b=0,x=l.length;b<x;b++){const m=l[b],w=h(m,$)[f];w&&(y(w,T,h(m,T)),p?(h(w,$)["*"]&&s.push(...S(this,K,re).call(this,h(w,$)["*"],t,h(m,T))),s.push(...S(this,K,re).call(this,w,t,h(m,T)))):g.push(w));for(let k=0,P=h(m,le).length;k<P;k++){const R=h(m,le)[k],C=h(m,T)===Pe?{}:{...h(m,T)};if(R==="*"){const V=h(m,$)["*"];V&&(s.push(...S(this,K,re).call(this,V,t,h(m,T))),y(V,T,C),g.push(V));continue}const[Se,Ue,Re]=R;if(!f&&!(Re instanceof RegExp))continue;const _=h(m,$)[Se],Mr=a.slice(d).join("/");if(Re instanceof RegExp){const V=Re.exec(Mr);if(V){if(C[Ue]=V[0],s.push(...S(this,K,re).call(this,_,t,h(m,T),C)),Object.keys(h(_,$)).length){y(_,T,C);const lt=((o=V[0].match(/\//))==null?void 0:o.length)??0;(c[lt]||(c[lt]=[])).push(_)}continue}}(Re===!0||Re.test(f))&&(C[Ue]=f,p?(s.push(...S(this,K,re).call(this,_,t,C,h(m,T))),h(_,$)["*"]&&s.push(...S(this,K,re).call(this,h(_,$)["*"],t,C,h(m,T)))):(y(_,T,C),g.push(_)))}}l=g.concat(c.shift()??[])}return s.length>1&&s.sort((d,u)=>d.score-u.score),[s.map(({handler:d,params:u})=>[d,u])]}},Q=new WeakMap,$=new WeakMap,le=new WeakMap,xe=new WeakMap,T=new WeakMap,K=new WeakSet,re=function(t,r,s,i){const l=[];for(let a=0,c=h(t,Q).length;a<c;a++){const o=h(t,Q)[a],d=o[r]||o[O],u={};if(d!==void 0&&(d.params=Object.create(null),l.push(d),s!==Pe||i&&i!==Pe))for(let f=0,p=d.possibleKeys.length;f<p;f++){const g=d.possibleKeys[f],b=u[d.score];d.params[g]=i!=null&&i[g]&&!b?i[g]:s[g]??(i==null?void 0:i[g]),u[d.score]=!0}}return l},ye),ae,Qt,$s=(Qt=class{constructor(){v(this,"name","TrieRouter");E(this,ae);y(this,ae,new Ts)}add(e,t,r){const s=fr(t);if(s){for(let i=0,l=s.length;i<l;i++)h(this,ae).insert(e,s[i],r);return}h(this,ae).insert(e,t,r)}match(e,t){return h(this,ae).search(e,t)}},ae=new WeakMap,Qt),Rr=class extends ys{constructor(e={}){super(e),this.router=e.router??new js({routers:[new Os,new $s]})}},Te="_hp",Ls={Change:"Input",DoubleClick:"DblClick"},Ns={svg:"2000/svg",math:"1998/Math/MathML"},$e=[],yt=new WeakMap,Ee=void 0,Ms=()=>Ee,B=e=>"t"in e,ut={onClick:["click",!1]},It=e=>{if(!e.startsWith("on"))return;if(ut[e])return ut[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,r,s]=t;return ut[e]=[(Ls[r]||r).toLowerCase(),!!s]}},_t=(e,t)=>Ee&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Ds=(e,t,r)=>{var s;t||(t={});for(let i in t){const l=t[i];if(i!=="children"&&(!r||r[i]!==l)){i=tt(i);const a=It(i);if(a){if((r==null?void 0:r[i])!==l&&(r&&e.removeEventListener(a[0],r[i],a[1]),l!=null)){if(typeof l!="function")throw new Error(`Event handler for "${i}" is not a function`);e.addEventListener(a[0],l,a[1])}}else if(i==="dangerouslySetInnerHTML"&&l)e.innerHTML=l.__html;else if(i==="ref"){let c;typeof l=="function"?c=l(e)||(()=>l(null)):l&&"current"in l&&(l.current=e,c=()=>l.current=null),yt.set(e,c)}else if(i==="style"){const c=e.style;typeof l=="string"?c.cssText=l:(c.cssText="",l!=null&&or(l,c.setProperty.bind(c)))}else{if(i==="value"){const o=e.nodeName;if(o==="INPUT"||o==="TEXTAREA"||o==="SELECT"){if(e.value=l==null||l===!1?null:l,o==="TEXTAREA"){e.textContent=l;continue}else if(o==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(i==="checked"&&e.nodeName==="INPUT"||i==="selected"&&e.nodeName==="OPTION")&&(e[i]=l);const c=_t(e,i);l==null||l===!1?e.removeAttribute(c):l===!0?e.setAttribute(c,""):typeof l=="string"||typeof l=="number"?e.setAttribute(c,l):e.setAttribute(c,l.toString())}}}if(r)for(let i in r){const l=r[i];if(i!=="children"&&!(i in t)){i=tt(i);const a=It(i);a?e.removeEventListener(a[0],l,a[1]):i==="ref"?(s=yt.get(e))==null||s():e.removeAttribute(_t(e,i))}}},Hs=(e,t)=>{t[A][0]=0,$e.push([e,t]);const r=t.tag[Et]||t.tag,s=r.defaultProps?{...r.defaultProps,...t.props}:t.props;try{return[r.call(null,s)]}finally{$e.pop()}},Pr=(e,t,r,s,i)=>{var l,a;(l=e.vR)!=null&&l.length&&(s.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((a=e[A][1][jr])==null||a.forEach(c=>i.push(c))),e.vC.forEach(c=>{var o;if(B(c))r.push(c);else if(typeof c.tag=="function"||c.tag===""){c.c=t;const d=r.length;if(Pr(c,t,r,s,i),c.s){for(let u=d;u<r.length;u++)r[u].s=!0;c.s=!1}}else r.push(c),(o=c.vR)!=null&&o.length&&(s.push(...c.vR),delete c.vR)})},Fs=e=>{var t;for(;e&&(e.tag===Te||!e.e);)e=e.tag===Te||!((t=e.vC)!=null&&t[0])?e.nN:e.vC[0];return e==null?void 0:e.e},Cr=e=>{var t,r,s,i,l,a;B(e)||((r=(t=e[A])==null?void 0:t[1][jr])==null||r.forEach(c=>{var o;return(o=c[2])==null?void 0:o.call(c)}),(s=yt.get(e.e))==null||s(),e.p===2&&((i=e.vC)==null||i.forEach(c=>c.p=2)),(l=e.vC)==null||l.forEach(Cr)),e.p||((a=e.e)==null||a.remove(),delete e.e),typeof e.tag=="function"&&(Ce.delete(e),Ye.delete(e),delete e[A][3],e.a=!0)},Ar=(e,t,r)=>{e.c=t,Or(e,t,r)},Bt=(e,t)=>{if(t){for(let r=0,s=e.length;r<s;r++)if(e[r]===t)return r}},qt=Symbol(),Or=(e,t,r)=>{var d;const s=[],i=[],l=[];Pr(e,t,s,i,l),i.forEach(Cr);const a=r?void 0:t.childNodes;let c,o=null;if(r)c=-1;else if(!a.length)c=0;else{const u=Bt(a,Fs(e.nN));u!==void 0?(o=a[u],c=u):c=Bt(a,(d=s.find(f=>f.tag!==Te&&f.e))==null?void 0:d.e)??-1,c===-1&&(r=!0)}for(let u=0,f=s.length;u<f;u++,c++){const p=s[u];let g;if(p.s&&p.e)g=p.e,p.s=!1;else{const b=r||!p.e;B(p)?(p.e&&p.d&&(p.e.textContent=p.t),p.d=!1,g=p.e||(p.e=document.createTextNode(p.t))):(g=p.e||(p.e=p.n?document.createElementNS(p.n,p.tag):document.createElement(p.tag)),Ds(g,p.props,p.pP),Or(p,g,b))}p.tag===Te?c--:r?g.parentNode||t.appendChild(g):a[c]!==g&&a[c-1]!==g&&(a[c+1]===g?t.appendChild(a[c]):t.insertBefore(g,o||a[c]||null))}if(e.pP&&(e.pP=void 0),l.length){const u=[],f=[];l.forEach(([,p,,g,b])=>{p&&u.push(p),g&&f.push(g),b==null||b()}),u.forEach(p=>p()),f.length&&requestAnimationFrame(()=>{f.forEach(p=>p())})}},Is=(e,t)=>!!(e&&e.length===t.length&&e.every((r,s)=>r[1]===t[s][1])),Ye=new WeakMap,wt=(e,t,r)=>{var l,a,c,o,d,u;const s=!r&&t.pC;r&&(t.pC||(t.pC=t.vC));let i;try{r||(r=typeof t.tag=="function"?Hs(e,t):Ie(t.props.children)),((l=r[0])==null?void 0:l.tag)===""&&r[0][vt]&&(i=r[0][vt],e[5].push([e,i,t]));const f=s?[...t.pC]:t.vC?[...t.vC]:void 0,p=[];let g;for(let b=0;b<r.length;b++){Array.isArray(r[b])&&r.splice(b,1,...r[b].flat());let x=_s(r[b]);if(x){typeof x.tag=="function"&&!x.tag[nr]&&(we.length>0&&(x[A][2]=we.map(w=>[w,w.values.at(-1)])),(a=e[5])!=null&&a.length&&(x[A][3]=e[5].at(-1)));let m;if(f&&f.length){const w=f.findIndex(B(x)?k=>B(k):x.key!==void 0?k=>k.key===x.key&&k.tag===x.tag:k=>k.tag===x.tag);w!==-1&&(m=f[w],f.splice(w,1))}if(m)if(B(x))m.t!==x.t&&(m.t=x.t,m.d=!0),x=m;else{const w=m.pP=m.props;if(m.props=x.props,m.f||(m.f=x.f||t.f),typeof x.tag=="function"){const k=m[A][2];m[A][2]=x[A][2]||[],m[A][3]=x[A][3],!m.f&&((m.o||m)===x.o||(o=(c=m.tag)[_r])!=null&&o.call(c,w,m.props))&&Is(k,m[A][2])&&(m.s=!0)}x=m}else if(!B(x)&&Ee){const w=ke(Ee);w&&(x.n=w)}if(!B(x)&&!x.s&&(wt(e,x),delete x.f),p.push(x),g&&!g.s&&!x.s)for(let w=g;w&&!B(w);w=(d=w.vC)==null?void 0:d.at(-1))w.nN=x;g=x}}t.vR=s?[...t.vC,...f||[]]:f||[],t.vC=p,s&&delete t.pC}catch(f){if(t.f=!0,f===qt){if(i)return;throw f}const[p,g,b]=((u=t[A])==null?void 0:u[3])||[];if(g){const x=()=>Qe([0,!1,e[2]],b),m=Ye.get(b)||[];m.push(x),Ye.set(b,m);const w=g(f,()=>{const k=Ye.get(b);if(k){const P=k.indexOf(x);if(P!==-1)return k.splice(P,1),x()}});if(w){if(e[0]===1)e[1]=!0;else if(wt(e,b,[w]),(g.length===1||e!==p)&&b.c){Ar(b,b.c,!1);return}throw qt}}throw f}finally{i&&e[5].pop()}},_s=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[A]=[0,[]];else{const t=Ns[e.tag];t&&(Ee||(Ee=lr("")),e.props.children=[{tag:Ee,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},Ut=(e,t)=>{var r,s;(r=t[A][2])==null||r.forEach(([i,l])=>{i.values.push(l)});try{wt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(s=t[A][2])==null||s.forEach(([i])=>{i.values.pop()}),(e[0]!==1||!e[1])&&Ar(t,t.c,!1)},Ce=new WeakMap,Wt=[],Qe=async(e,t)=>{e[5]||(e[5]=[]);const r=Ce.get(t);r&&r[0](void 0);let s;const i=new Promise(l=>s=l);if(Ce.set(t,[s,()=>{e[2]?e[2](e,t,l=>{Ut(l,t)}).then(()=>s(t)):(Ut(e,t),s(t))}]),Wt.length)Wt.at(-1).add(t);else{await Promise.resolve();const l=Ce.get(t);l&&(Ce.delete(t),l[1]())}return i},Bs=(e,t,r)=>({tag:Te,props:{children:e},key:r,e:t,p:1}),ft=0,jr=1,pt=2,gt=3,mt=new WeakMap,Tr=(e,t)=>!e||!t||e.length!==t.length||t.some((r,s)=>r!==e[s]),qs=void 0,Kt=[],Us=e=>{var a;const t=()=>typeof e=="function"?e():e,r=$e.at(-1);if(!r)return[t(),()=>{}];const[,s]=r,i=(a=s[A][1])[ft]||(a[ft]=[]),l=s[A][0]++;return i[l]||(i[l]=[t(),c=>{const o=qs,d=i[l];if(typeof c=="function"&&(c=c(d[0])),!Object.is(c,d[0]))if(d[0]=c,Kt.length){const[u,f]=Kt.at(-1);Promise.all([u===3?s:Qe([u,!1,o],s),f]).then(([p])=>{if(!p||!(u===2||u===3))return;const g=p.vC;requestAnimationFrame(()=>{setTimeout(()=>{g===p.vC&&Qe([u===3?1:0,!1,o],p)})})})}else Qe([0,!1,o],s)}])},Ct=(e,t)=>{var c;const r=$e.at(-1);if(!r)return e;const[,s]=r,i=(c=s[A][1])[pt]||(c[pt]=[]),l=s[A][0]++,a=i[l];return Tr(a==null?void 0:a[1],t)?i[l]=[e,t]:e=i[l][0],e},Ws=e=>{const t=mt.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(r=>mt.set(e,[r]),r=>mt.set(e,[void 0,r])),e},Ks=(e,t)=>{var c;const r=$e.at(-1);if(!r)return e();const[,s]=r,i=(c=s[A][1])[gt]||(c[gt]=[]),l=s[A][0]++,a=i[l];return Tr(a==null?void 0:a[1],t)&&(i[l]=[e(),t]),i[l][0]},zs=lr({pending:!1,data:null,method:null,action:null}),zt=new Set,Vs=e=>{zt.add(e),e.finally(()=>zt.delete(e))},At=(e,t)=>Ks(()=>r=>{let s;e&&(typeof e=="function"?s=e(r)||(()=>{e(null)}):e&&"current"in e&&(e.current=r,s=()=>{e.current=null}));const i=t(r);return()=>{i==null||i(),s==null||s()}},[e]),de=Object.create(null),Ke=Object.create(null),qe=(e,t,r,s,i)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const l=document.head;let{onLoad:a,onError:c,precedence:o,blocking:d,...u}=t,f=null,p=!1;const g=ze[e];let b;if(g.length>0){const k=l.querySelectorAll(e);e:for(const P of k)for(const R of ze[e])if(P.getAttribute(R)===t[R]){f=P;break e}if(!f){const P=g.reduce((R,C)=>t[C]===void 0?R:`${R}-${C}-${t[C]}`,e);p=!Ke[P],f=Ke[P]||(Ke[P]=(()=>{const R=document.createElement(e);for(const C of g)t[C]!==void 0&&R.setAttribute(C,t[C]),t.rel&&R.setAttribute("rel",t.rel);return R})())}}else b=l.querySelectorAll(e);o=s?o??"":void 0,s&&(u[Ve]=o);const x=Ct(k=>{if(g.length>0){let P=!1;for(const R of l.querySelectorAll(e)){if(P&&R.getAttribute(Ve)!==o){l.insertBefore(k,R);return}R.getAttribute(Ve)===o&&(P=!0)}l.appendChild(k)}else if(b){let P=!1;for(const R of b)if(R===k){P=!0;break}P||l.insertBefore(k,l.contains(b[0])?b[0]:l.querySelector(e)),b=void 0}},[o]),m=At(t.ref,k=>{var C;const P=g[0];if(r===2&&(k.innerHTML=""),(p||b)&&x(k),!c&&!a)return;let R=de[C=k.getAttribute(P)]||(de[C]=new Promise((Se,Ue)=>{k.addEventListener("load",Se),k.addEventListener("error",Ue)}));a&&(R=R.then(a)),c&&(R=R.catch(c)),R.catch(()=>{})});if(i&&d==="render"){const k=ze[e][0];if(t[k]){const P=t[k],R=de[P]||(de[P]=new Promise((C,Se)=>{x(f),f.addEventListener("load",C),f.addEventListener("error",Se)}));Ws(R)}}const w={tag:e,type:e,props:{...u,ref:m},ref:m};return w.p=r,f&&(w.e=f),Bs(w,l)},Gs=e=>{const t=Ms(),r=t&&ke(t);return r!=null&&r.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:qe("title",e,void 0,!1,!1)},Js=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:qe("script",e,1,!1,!0),Xs=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,qe("style",e,2,!0,!0)),Zs=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:qe("link",e,1,"precedence"in e,!0),Ys=e=>qe("meta",e,void 0,!1,!1),$r=Symbol(),Qs=e=>{const{action:t,...r}=e;typeof t!="function"&&(r.action=t);const[s,i]=Us([null,!1]),l=Ct(async d=>{const u=d.isTrusted?t:d.detail[$r];if(typeof u!="function")return;d.preventDefault();const f=new FormData(d.target);i([f,!0]);const p=u(f);p instanceof Promise&&(Vs(p),await p),i([null,!0])},[]),a=At(e.ref,d=>(d.addEventListener("submit",l),()=>{d.removeEventListener("submit",l)})),[c,o]=s;return s[1]=!1,{tag:zs,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?t:null},children:{tag:"form",props:{...r,ref:a},type:"form",ref:a}},f:o}},Lr=(e,{formAction:t,...r})=>{if(typeof t=="function"){const s=Ct(i=>{i.preventDefault(),i.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[$r]:t}}))},[]);r.ref=At(r.ref,i=>(i.addEventListener("click",s),()=>{i.removeEventListener("click",s)}))}return{tag:e,props:r,type:e,ref:r.ref}},en=e=>Lr("input",e),tn=e=>Lr("button",e);Object.assign(bt,{title:Gs,script:Js,style:Xs,link:Zs,meta:Ys,form:Qs,input:en,button:tn});kt(null);new TextEncoder;var rn=kt(null),sn=(e,t,r,s)=>(i,l)=>{const a="<!DOCTYPE html>",c=r?Nt(d=>r(d,e),{Layout:t,...l},i):i,o=Ir`${M(a)}${Nt(rn.Provider,{value:e},c)}`;return e.html(o)},nn=(e,t)=>function(s,i){const l=s.getLayout()??Qr;return e&&s.setLayout(a=>e({...a,Layout:l},s)),s.setRenderer(sn(s,l,e)),i()};const ln=nn(({children:e})=>n("html",{lang:"ja",children:[n("head",{children:[n("meta",{charset:"UTF-8"}),n("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),n("title",{children:"航空券予約システム - Flight Booking"}),n("script",{src:"https://cdn.tailwindcss.com"}),n("link",{href:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css",rel:"stylesheet"}),n("link",{href:"/static/style.css",rel:"stylesheet"})]}),n("body",{children:e})]})),it=new Rr;it.use(ln);it.get("/",e=>e.render(n("div",{class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col",children:[n("header",{class:"bg-blue-600 text-white shadow-lg flex-shrink-0",children:n("div",{class:"container mx-auto px-4 py-4",children:n("div",{class:"flex items-center justify-between",children:[n("div",{class:"flex items-center space-x-2",children:[n("i",{class:"fas fa-plane text-3xl"}),n("h1",{class:"text-2xl font-bold",children:"FlightSearch"})]}),n("nav",{class:"hidden md:flex space-x-6",children:[n("a",{href:"/",class:"hover:text-blue-200 transition",children:"ホーム"}),n("a",{href:"#",class:"hover:text-blue-200 transition",children:"予約確認"}),n("a",{href:"#",class:"hover:text-blue-200 transition",children:"お問い合わせ"})]})]})})}),n("main",{id:"mainContent",class:"flex-grow",children:n("div",{class:"container mx-auto px-4 py-8",children:[n("div",{class:"text-center mb-8",children:[n("h2",{class:"text-4xl font-bold text-gray-800 mb-2",children:"お得な航空券を検索"}),n("p",{class:"text-gray-600",children:"世界中のフライトを比較して、最安値を見つけましょう"})]}),n("div",{class:"bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-8",children:[n("div",{class:"flex flex-wrap gap-4 mb-6",children:[n("label",{class:"flex items-center space-x-2 cursor-pointer",children:[n("input",{type:"radio",name:"tripType",value:"roundtrip",checked:!0,class:"w-4 h-4 text-blue-600"}),n("span",{class:"text-gray-700 font-medium",children:"往復"})]}),n("label",{class:"flex items-center space-x-2 cursor-pointer",children:[n("input",{type:"radio",name:"tripType",value:"oneway",class:"w-4 h-4 text-blue-600"}),n("span",{class:"text-gray-700 font-medium",children:"片道"})]}),n("label",{class:"flex items-center space-x-2 cursor-pointer",children:[n("input",{type:"radio",name:"tripType",value:"multicity",class:"w-4 h-4 text-blue-600"}),n("span",{class:"text-gray-700 font-medium",children:"複数都市"})]})]}),n("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n("div",{class:"relative",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"出発地"}),n("div",{class:"relative",children:[n("i",{class:"fas fa-plane-departure absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n("input",{type:"text",id:"fromLocation",placeholder:"東京 (TYO)",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n("div",{class:"relative",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"目的地"}),n("div",{class:"relative",children:[n("i",{class:"fas fa-plane-arrival absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n("input",{type:"text",id:"toLocation",placeholder:"ニューヨーク (JFK)",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n("div",{class:"relative",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"出発日"}),n("div",{class:"relative",children:[n("i",{class:"fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n("input",{type:"date",id:"departureDate",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n("div",{class:"relative",id:"returnDateField",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"帰国日"}),n("div",{class:"relative",children:[n("i",{class:"fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n("input",{type:"date",id:"returnDate",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n("div",{class:"relative",children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"乗客"}),n("button",{type:"button",id:"passengerButton",class:"w-full px-4 py-3 border border-gray-300 rounded-lg text-left flex items-center justify-between hover:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n("span",{class:"flex items-center",children:[n("i",{class:"fas fa-user mr-2 text-gray-400"}),n("span",{id:"passengerDisplay",children:"1 名, エコノミー"})]}),n("i",{class:"fas fa-chevron-down text-gray-400"})]}),n("div",{id:"passengerDropdown",class:"hidden absolute z-10 mt-2 w-full md:w-96 bg-white border border-gray-200 rounded-lg shadow-xl p-4",children:n("div",{class:"space-y-4",children:[n("div",{class:"flex items-center justify-between",children:[n("div",{children:[n("div",{class:"font-medium text-gray-700",children:"大人"}),n("div",{class:"text-sm text-gray-500",children:"12歳以上"})]}),n("div",{class:"flex items-center space-x-3",children:[n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('adults', -1)",children:"-"}),n("span",{id:"adultsCount",class:"w-8 text-center font-medium",children:"1"}),n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('adults', 1)",children:"+"})]})]}),n("div",{class:"flex items-center justify-between",children:[n("div",{children:[n("div",{class:"font-medium text-gray-700",children:"子供"}),n("div",{class:"text-sm text-gray-500",children:"2-11歳"})]}),n("div",{class:"flex items-center space-x-3",children:[n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('children', -1)",children:"-"}),n("span",{id:"childrenCount",class:"w-8 text-center font-medium",children:"0"}),n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('children', 1)",children:"+"})]})]}),n("div",{class:"flex items-center justify-between",children:[n("div",{children:[n("div",{class:"font-medium text-gray-700",children:"幼児"}),n("div",{class:"text-sm text-gray-500",children:"2歳未満"})]}),n("div",{class:"flex items-center space-x-3",children:[n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('infants', -1)",children:"-"}),n("span",{id:"infantsCount",class:"w-8 text-center font-medium",children:"0"}),n("button",{type:"button",class:"w-8 h-8 rounded-full border border-gray-300 hover:bg-gray-100",onclick:"updatePassenger('infants', 1)",children:"+"})]})]}),n("hr",{class:"my-4"}),n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"座席クラス"}),n("select",{id:"cabinClass",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n("option",{value:"economy",children:"エコノミー"}),n("option",{value:"premium_economy",children:"プレミアムエコノミー"}),n("option",{value:"business",children:"ビジネス"}),n("option",{value:"first",children:"ファースト"})]})]}),n("button",{type:"button",class:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",onclick:"closePassengerDropdown()",children:"完了"})]})})]}),n("div",{class:"flex items-end",children:n("label",{class:"flex items-center space-x-2 cursor-pointer pb-3",children:[n("input",{type:"checkbox",id:"directFlights",class:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),n("span",{class:"text-gray-700",children:"直行便のみ"})]})}),n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2 opacity-0",children:"検索"}),n("button",{type:"button",onclick:"searchFlights()",class:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",children:[n("i",{class:"fas fa-search mr-2"}),"フライトを検索"]})]})]})]}),n("div",{id:"searchResults",class:"hidden",children:[n("div",{class:"bg-white rounded-lg shadow-md p-6 mb-6",children:n("div",{class:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[n("div",{children:[n("h3",{class:"text-2xl font-bold text-gray-800 mb-2",children:"検索結果"}),n("p",{class:"text-gray-600",id:"routeInfo",children:"東京 (TYO) → ニューヨーク (JFK)"})]}),n("div",{class:"flex items-center space-x-4",children:n("select",{id:"sortBy",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n("option",{value:"best",children:"おすすめ順"}),n("option",{value:"price",children:"最安値順"}),n("option",{value:"duration",children:"最短時間順"}),n("option",{value:"departure",children:"出発時間順"})]})})]})}),n("div",{class:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n("div",{class:"lg:col-span-1",children:n("div",{class:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[n("h4",{class:"text-lg font-bold text-gray-800 mb-4",children:"フィルター"}),n("div",{class:"mb-6",children:[n("h5",{class:"font-semibold text-gray-700 mb-3",children:"価格帯"}),n("div",{class:"space-y-2",children:[n("input",{type:"range",min:"0",max:"500000",step:"10000",class:"w-full",id:"priceRange"}),n("div",{class:"flex justify-between text-sm text-gray-600",children:[n("span",{children:"¥0"}),n("span",{id:"maxPrice",children:"¥500,000+"})]})]})]}),n("div",{class:"mb-6",children:[n("h5",{class:"font-semibold text-gray-700 mb-3",children:"経由回数"}),n("div",{class:"space-y-2",children:[n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700",children:"直行便"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700",children:"1回経由"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700",children:"2回以上経由"})]})]})]}),n("div",{class:"mb-6",children:[n("h5",{class:"font-semibold text-gray-700 mb-3",children:"出発時間帯"}),n("div",{class:"grid grid-cols-2 gap-2",children:[n("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[n("i",{class:"fas fa-sun text-yellow-500"})," 朝"]}),n("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[n("i",{class:"fas fa-cloud-sun text-orange-500"})," 昼"]}),n("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[n("i",{class:"fas fa-cloud-moon text-indigo-500"})," 夕"]}),n("button",{type:"button",class:"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-blue-50 hover:border-blue-500",children:[n("i",{class:"fas fa-moon text-blue-900"})," 夜"]})]})]}),n("div",{class:"mb-6",children:[n("h5",{class:"font-semibold text-gray-700 mb-3",children:"航空会社"}),n("div",{class:"space-y-2 max-h-48 overflow-y-auto",children:[n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700 text-sm",children:"全日空 (ANA)"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700 text-sm",children:"日本航空 (JAL)"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700 text-sm",children:"ユナイテッド航空"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700 text-sm",children:"デルタ航空"})]}),n("label",{class:"flex items-center space-x-2",children:[n("input",{type:"checkbox",class:"w-4 h-4 text-blue-600 rounded",checked:!0}),n("span",{class:"text-gray-700 text-sm",children:"アメリカン航空"})]})]})]}),n("button",{type:"button",class:"w-full bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"フィルターをリセット"})]})}),n("div",{class:"lg:col-span-3",id:"flightList",children:n("div",{class:"space-y-4",id:"flightCards"})})]})]})]})}),n("div",{id:"seatClassModal",class:"hidden fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modalTitle",children:n("div",{class:"flex items-center justify-center min-h-screen p-4",children:n("div",{class:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl relative",children:[n("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 rounded-t-2xl",children:[n("div",{class:"flex items-center justify-between",children:[n("h2",{id:"modalTitle",class:"text-2xl font-bold",children:n("span",{id:"modalRouteInfo",children:"東京 → ニューヨーク"})}),n("button",{onclick:"closeSeatClassModal()",class:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition","aria-label":"モーダルを閉じる",children:n("i",{class:"fas fa-times text-2xl"})})]}),n("div",{id:"modalFlightInfo",class:"mt-2 text-sm opacity-90",children:"フライト情報を読み込み中..."})]}),n("div",{class:"p-6 max-h-[70vh] overflow-y-auto",children:[n("div",{class:"mb-8",children:[n("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[n("i",{class:"fas fa-plane-departure text-blue-600 mr-2"}),"往路便"]}),n("div",{id:"outboundSeatClasses",class:"space-y-3"})]}),n("div",{class:"mb-6",children:[n("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[n("i",{class:"fas fa-plane-arrival text-blue-600 mr-2"}),"復路便"]}),n("div",{id:"returnSeatClasses",class:"space-y-3"})]}),n("div",{class:"bg-blue-50 rounded-lg p-4 mt-6",children:n("div",{class:"flex justify-between items-center",children:[n("div",{children:[n("div",{class:"text-sm text-gray-600",children:"合計金額（1名あたり）"}),n("div",{class:"text-xs text-gray-500 mt-1",children:"往復 • 税・手数料込み"})]}),n("div",{class:"text-3xl font-bold text-blue-600",id:"modalTotalPrice",children:"¥0"})]})})]}),n("div",{class:"border-t border-gray-200 px-6 py-4 bg-gray-50 rounded-b-2xl",children:n("div",{class:"flex space-x-4",children:[n("button",{onclick:"closeSeatClassModal()",class:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-300 transition",children:"キャンセル"}),n("button",{onclick:"confirmSeatClassSelection()",class:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",disabled:!0,id:"confirmSelectionBtn",children:"予約を続ける"})]})})]})})}),n("div",{id:"bookingPage",class:"hidden flex-grow",children:n("div",{class:"container mx-auto px-4 py-8 min-h-full",children:[n("button",{onclick:"backToSearch()",class:"mb-6 flex items-center text-blue-600 hover:text-blue-800 transition",children:[n("i",{class:"fas fa-arrow-left mr-2"}),"検索結果に戻る"]}),n("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[n("h2",{class:"text-3xl font-bold text-gray-800 mb-4 flex items-center",children:[n("i",{class:"fas fa-ticket-alt text-blue-600 mr-3"}),"予約内容の確認"]}),n("div",{class:"bg-blue-50 border-l-4 border-blue-600 p-4 rounded",children:n("p",{class:"text-sm text-gray-700",children:[n("i",{class:"fas fa-info-circle text-blue-600 mr-2"}),"フライトと座席クラスを選択しました。次に座席を選択し、お客様情報を入力してください。"]})})]}),n("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[n("h3",{class:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[n("i",{class:"fas fa-plane text-blue-600 mr-2"}),"選択済みフライト情報"]}),n("div",{id:"flightSummary",class:"space-y-4"})]}),n("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[n("h3",{class:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[n("i",{class:"fas fa-chair text-blue-600 mr-2"}),"座席選択",n("span",{class:"ml-auto text-sm font-normal text-gray-600",id:"seatSelectionStatus",children:["選択済み: ",n("span",{id:"selectedSeatsCount",children:"0"})," / ",n("span",{id:"requiredSeats",children:"1"})," 座席"]})]}),n("div",{class:"flex flex-wrap gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[n("div",{class:"flex items-center space-x-2",children:[n("div",{class:"w-8 h-8 bg-green-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"空"}),n("span",{class:"text-sm text-gray-700",children:"利用可能"})]}),n("div",{class:"flex items-center space-x-2",children:[n("div",{class:"w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white text-xs font-bold",children:"選"}),n("span",{class:"text-sm text-gray-700",children:"選択済み"})]}),n("div",{class:"flex items-center space-x-2",children:[n("div",{class:"w-8 h-8 bg-gray-400 rounded flex items-center justify-center text-white text-xs font-bold",children:"×"}),n("span",{class:"text-sm text-gray-700",children:"利用不可"})]}),n("div",{class:"flex items-center space-x-2",children:[n("div",{class:"w-8 h-8 bg-yellow-500 rounded flex items-center justify-center text-white text-xs font-bold",children:"特"}),n("span",{class:"text-sm text-gray-700",children:"特別席（追加料金）"})]})]}),n("div",{class:"aircraftmap_container mb-6",children:n("div",{class:"od-aircraftmap-map-wrapper",children:[n("div",{class:"mb-8",children:[n("h4",{class:"text-lg font-bold text-gray-800 mb-3 flex items-center",children:[n("i",{class:"fas fa-plane-departure text-blue-600 mr-2"}),"往路便 - 座席選択"]}),n("div",{id:"outboundSeatMap",class:"od-aircraftmap-cabins"})]}),n("div",{children:[n("h4",{class:"text-lg font-bold text-gray-800 mb-3 flex items-center",children:[n("i",{class:"fas fa-plane-arrival text-blue-600 mr-2"}),"復路便 - 座席選択"]}),n("div",{id:"returnSeatMap",class:"od-aircraftmap-cabins"})]})]})}),n("div",{class:"bg-blue-50 rounded-lg p-4",children:[n("h5",{class:"font-bold text-gray-800 mb-2",children:"選択済み座席"}),n("div",{id:"selectedSeatsSummary",class:"text-sm text-gray-700",children:"座席を選択してください"})]})]}),n("div",{class:"bg-white rounded-2xl shadow-xl p-6 mb-6",children:[n("h3",{class:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n("i",{class:"fas fa-user-edit text-blue-600 mr-2"}),"お客様情報"]}),n("form",{id:"customerInfoForm",children:[n("div",{id:"passengerFormsContainer"}),n("div",{class:"border-t border-gray-200 pt-6 mt-6",children:[n("h4",{class:"text-xl font-bold text-gray-800 mb-4",children:"連絡先情報"}),n("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:["メールアドレス ",n("span",{class:"text-red-500",children:"*"})]}),n("input",{type:"email",id:"contactEmail",required:!0,placeholder:"example@email.com",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:["電話番号 ",n("span",{class:"text-red-500",children:"*"})]}),n("input",{type:"tel",id:"contactPhone",required:!0,placeholder:"090-1234-5678",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n("div",{class:"border-t border-gray-200 pt-6 mt-6",children:[n("h4",{class:"text-xl font-bold text-gray-800 mb-4",children:"緊急連絡先"}),n("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"氏名"}),n("input",{type:"text",id:"emergencyName",placeholder:"山田 太郎",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n("div",{children:[n("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"電話番号"}),n("input",{type:"tel",id:"emergencyPhone",placeholder:"090-1234-5678",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),n("div",{class:"border-t border-gray-200 pt-6 mt-6",children:n("label",{class:"flex items-start space-x-3 cursor-pointer",children:[n("input",{type:"checkbox",id:"agreeTerms",required:!0,class:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 mt-1"}),n("span",{class:"text-sm text-gray-700",children:[n("a",{href:"#",class:"text-blue-600 hover:underline",children:"利用規約"}),"および",n("a",{href:"#",class:"text-blue-600 hover:underline",children:"プライバシーポリシー"}),"に同意します",n("span",{class:"text-red-500",children:"*"})]})]})})]})]}),n("div",{class:"bg-white rounded-2xl shadow-xl p-6 sticky bottom-4",children:n("div",{class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[n("div",{children:[n("div",{class:"text-sm text-gray-600 mb-1",children:"合計金額"}),n("div",{class:"text-4xl font-bold text-blue-600",id:"finalTotalPrice",children:"¥0"}),n("div",{class:"text-xs text-gray-500 mt-1",children:[n("span",{id:"totalPassengersCount",children:"1"}),"名分 • 往復 • 税・手数料込み"]})]}),n("div",{class:"flex space-x-4 w-full md:w-auto",children:[n("button",{type:"button",onclick:"backToSearch()",class:"flex-1 md:flex-none bg-gray-200 text-gray-700 py-4 px-8 rounded-lg font-semibold hover:bg-gray-300 transition",children:"キャンセル"}),n("button",{type:"button",onclick:"proceedToPayment()",class:"flex-1 md:flex-none bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition shadow-lg hover:shadow-xl",disabled:!0,id:"proceedPaymentBtn",children:[n("i",{class:"fas fa-credit-card mr-2"}),"支払いへ進む"]})]})]})})]})}),n("footer",{class:"bg-gray-800 text-white flex-shrink-0 mt-auto",children:n("div",{class:"container mx-auto px-4 py-8",children:[n("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n("div",{children:[n("h5",{class:"font-bold text-lg mb-4",children:"FlightSearch"}),n("p",{class:"text-gray-400",children:"お得な航空券を簡単検索"})]}),n("div",{children:[n("h5",{class:"font-bold text-lg mb-4",children:"リンク"}),n("ul",{class:"space-y-2 text-gray-400",children:[n("li",{children:n("a",{href:"#",class:"hover:text-white",children:"利用規約"})}),n("li",{children:n("a",{href:"#",class:"hover:text-white",children:"プライバシーポリシー"})}),n("li",{children:n("a",{href:"#",class:"hover:text-white",children:"お問い合わせ"})})]})]}),n("div",{children:[n("h5",{class:"font-bold text-lg mb-4",children:"フォロー"}),n("div",{class:"flex space-x-4",children:[n("a",{href:"#",class:"text-gray-400 hover:text-white",children:n("i",{class:"fab fa-facebook text-2xl"})}),n("a",{href:"#",class:"text-gray-400 hover:text-white",children:n("i",{class:"fab fa-twitter text-2xl"})}),n("a",{href:"#",class:"text-gray-400 hover:text-white",children:n("i",{class:"fab fa-instagram text-2xl"})})]})]})]}),n("div",{class:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:n("p",{children:"© 2026 FlightSearch. All rights reserved."})})]})}),n("script",{src:"/static/app.js"})]})));it.post("/api/search",async e=>{const t=await e.req.json();return e.json({success:!0,message:"Search received",data:t})});const Vt=new Rr,an=Object.assign({"/src/index.tsx":it});let Nr=!1;for(const[,e]of Object.entries(an))e&&(Vt.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Vt.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Nr=!0);if(!Nr)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{Vt as default};
